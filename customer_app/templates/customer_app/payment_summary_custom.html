<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Form</title>
    <link rel="stylesheet" href="{% static 'customer_app/css/payment_summary.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
            /* styles.css */
    .summary-section {
        text-align: center; /* Center the content */
        padding: 5px;
    }

    .imageVan {
        max-width: 200px; /* Set a maximum width for the image */
        height: auto; /* Maintain the aspect ratio */
        display: block; /* Make the image a block element */
        margin: 0 auto; /* Center the image horizontally */
        border-radius: 10px; /* Add border radius to the image */
    }

    .container {
    display: flex;
    justify-content: center; /* Center all content horizontally */
    align-items: flex-start; /* Align items to the top */
    max-width: 1200px;
    margin-left: auto; /* Center the container */
    margin-right: auto; /* Center the container */
    gap: 50px; /* Space between Payment Form and Booking Summary */
    }
    

.go-back-link {
    display: inline-flex; /* Allows for icon alignment */
    align-items: center; /* Center the icon and text vertically */
    padding: 10px 20px; /* Add padding for a button-like appearance */
    color: white; /* Text color */
    background-color: #28a745; /* Green background color */
    border-radius: 25px; /* Rounded corners */
    text-decoration: none; /* Remove underline */
    font-size: 16px; /* Font size */
    font-weight: 600; /* Bold font */
    transition: background-color 0.3s ease, transform 0.2s ease; /* Smooth transitions */
}

.go-back-link:hover {
    background-color: #218838; /* Darker shade on hover */
    transform: scale(1.05); /* Slightly enlarge on hover */
}

.go-back-link i {
    margin-right: 10px; /* Space between the icon and text */
}


    </style>
</head>
<body>
    
    <div class="container">
        <!-- Payment Method Section -->
        <div class="payment-method">
            <h2>Payment Form</h2>
            <h4>Choose a payment method</h4>
            <div class="payment-options">
                <div id="gcash-card" class="payment-option-card" onclick="selectPaymentMethod('gcash')">
                    <img src="{% static 'images/gcash.png' %}" alt="GCash Icon" class="payment-logo">
                    <h3 class="payment-text">GCash</h3>
                </div>
                <div id="bpi-card" class="payment-option-card" onclick="selectPaymentMethod('bpi')">
                    <img src="{% static 'images/bpi.png' %}" alt="BPI Icon" class="payment-logo">
                    <h3 class="payment-text">BPI</h3>
                </div>
                <div id="cash-card" class="payment-option-card" onclick="selectPaymentMethod('cash')">
                    <img src="{% static 'images/cash.png' %}" alt="Cash Icon" class="payment-logo">
                    <h3 class="payment-text">Cash</h3>
                </div>
            </div>

            <div id="gcash-details" class="payment-details">
                <img src="{% static 'images/gcash_qrcode.jpg' %}" alt="GCash QR Code" class="qrcode">
                <p><strong>GCash Number: 09123456789</strong></p>
            </div>

            <div id="bpi-details" class="payment-details">
                <img src="{% static 'images/bpi_qrcode.jpeg' %}" alt="BPI QR Code" class="qrcode">
                <p><strong>BPI Account Number: 1234-5678-9012</strong></p>
            </div>

            <div id="proof-of-payment" class="proof-of-payment">
                <label for="proof">Proof of Payment (upload):</label>
                <input type="file" id="proof" name="proof">
            </div>

            <div class="terms">
                <input type="checkbox" id="terms" name="terms">
                <label for="terms">I have read the Terms and Conditions</label>
            </div>
            <div class="go-back-container">
                <a href="{% url 'customerhomepage2' %}?came_from_payment=true" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> <!-- Left arrow icon -->
                    Edit your form details</a>
            </div>
        </div>
        <form method="POST" action="{% url 'bookvanform' %}">
            {% csrf_token %}
        <!-- Booking Summary -->
        <div class="booking-summary">
            <h2>Booking Summary</h2>

            <!-- Hidden Inputs for Data Submission -->
        <input type="hidden" name="full_name" value="{{ full_name }}">
        <input type="hidden" name="passenger_count" value="{{ passenger_count }}">
        <input type="hidden" name="contact_number" value="{{ contact_number }}">
        <input type="hidden" name="dropoff_address" value="{{ dropoff_address }}">
        <input type="hidden" name="additional_notes" value="{{ additional_notes }}">
        <input type="hidden" name="round_trip" value="{{ round_trip }}">
        <input type="hidden" name="payment_mode" value="{{ payment_mode }}">
        <input type="hidden" name="package_price" value="{{ package_price }}">
        <input type="hidden" name="van_id" value="{{ van_id }}">         
            
            <div class="summary-section">
                <h3>Trip Schedule</h3>
                <p><strong>Pick-Up Address:</strong> {{ pickup_address }}</p>
                <p><strong>Drop-Off Address:</strong> {{ dropoff_address }}</p>
                <p><strong>Date and Time:</strong> {{ pickup_datetime }}</p>
                <hr>
            </div>

            <div class="summary-section">
                <h3>Personal Information</h3>
                <p><strong>Full Name:</strong> {{ full_name }}</p>
                <p><strong>Contact No:</strong> {{ contact_number }}</p>
                <p><strong>No. of Passengers:</strong> {{ passenger_count }}</p>
                <p><strong>Additional Notes:</strong> {{ additional_notes }}</p>
                <p><strong>Round Trip:</strong> {{ round_trip|yesno:"Yes,No" }}</p>
                <hr>
            </div>

            <div class="summary-section">
                <h3>Total Amount</h3>
                <p><strong>Package Price:</strong> â‚±<span id="summary-fee-pp"></span></p>
                <hr>
            </div>

            <div class="summary-section">
                <p><strong>Mode of Payment:</strong> <span id="selected-payment-method">Cash</span></p>
                <button class="book-now-btn">BOOK NOW</button>
                <hr>
            </div>
        </div>
        </form>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Retrieve data from localStorage
            const destImage = localStorage.getItem('destImage');
            const destination1 = localStorage.getItem('destination1');
            const destination2 = localStorage.getItem('destination2');
            const transportationFee = localStorage.getItem('transportationFee');
            const sumfee = localStorage.getItem('transportationFee');

            // Populate the booking summary
            document.getElementById('summary-dest-image').src = destImage || ''; // Use a default value if null
            document.getElementById('summary-dest1').innerText = destination1 || '';
            document.getElementById('summary-dest2').innerText = destination2 || '';
            document.getElementById('summary-fee').innerText = transportationFee || '';
            document.getElementById('summary-fee-pp').innerText = transportationFee || '';
        });

        function selectPaymentMethod(method) {
    // Remove 'selected' class from all cards
    document.getElementById('gcash-card').classList.remove('selected');
    document.getElementById('bpi-card').classList.remove('selected');
    document.getElementById('cash-card').classList.remove('selected');

    // Hide payment details sections
    document.getElementById('gcash-details').style.display = 'none';
    document.getElementById('bpi-details').style.display = 'none';
    document.getElementById('proof-of-payment').style.display = 'block';  // Show Proof of Payment by default

    // Update the booking summary with the selected payment method
    let paymentMethodText = '';

    if (method === 'gcash') {
        document.getElementById('gcash-details').style.display = 'block';
        document.getElementById('gcash-card').classList.add('selected');
        paymentMethodText = 'GCash';
    } else if (method === 'bpi') {
        document.getElementById('bpi-details').style.display = 'block';
        document.getElementById('bpi-card').classList.add('selected');
        paymentMethodText = 'BPI';
    } else if (method === 'cash') {
        document.getElementById('proof-of-payment').style.display = 'none';
        document.getElementById('cash-card').classList.add('selected');
        paymentMethodText = 'Cash';
    }

    // Update the Mode of Payment in the booking summary
    document.getElementById('selected-payment-method').innerText = paymentMethodText;
}
    </script>
</body>
</html>
